(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a370d0b","chunk-2b406051","chunk-2d21e3e9"],{"00b8":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:24}},[e("a-card",{style:t.cardStyle,attrs:{bordered:!1}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchQuery.apply(null,arguments)}}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"名称",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-input",{attrs:{placeholder:"请输入名称"},model:{value:t.queryParam.name,callback:function(e){t.$set(t.queryParam,"name",e)},expression:"queryParam.name"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"编号",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-input",{attrs:{placeholder:"请输入编号"},model:{value:t.queryParam.serialNo,callback:function(e){t.$set(t.queryParam,"serialNo",e)},expression:"queryParam.serialNo"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("span",{staticClass:"table-page-search-submitButtons"},[e("a-button",{attrs:{type:"primary"},on:{click:t.searchQuery}},[t._v("查询")]),e("a-button",{directives:[{name:"print",rawName:"v-print",value:"#reportPrint",expression:"'#reportPrint'"}],staticStyle:{"margin-left":"8px"},attrs:{icon:"printer"}},[t._v("打印")]),e("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"download"},on:{click:t.exportExcel}},[t._v("导出")])],1)]),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",[e("span",[t._v("本月发生总额："+t._s(t.allMonthAmount)+"，当前总余额："+t._s(t.allCurrentAmount))])])],1)],1)],1)],1),e("section",{ref:"print",attrs:{id:"reportPrint"}},[e("a-table",{ref:"table",attrs:{bordered:"",size:"middle",rowKey:"id",columns:t.columns,dataSource:t.dataSource,components:t.handleDrag(t.columns),pagination:!1,scroll:t.scroll,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(a,n){return e("span",{},[e("a",{on:{click:function(e){return t.showAccountInOutList(n)}}},[t._v(t._s(n.id?"流水":""))])])}}])},[e("span",{attrs:{slot:"customTitle"},slot:"customTitle"},[e("a-popover",{attrs:{trigger:"click",placement:"right"}},[e("template",{slot:"content"},[e("a-checkbox-group",{attrs:{defaultValue:t.settingDataIndex},on:{change:t.onColChange},model:{value:t.settingDataIndex,callback:function(e){t.settingDataIndex=e},expression:"settingDataIndex"}},[e("a-row",{staticStyle:{width:"600px"}},[t._l(t.defColumns,(function(a,n){return[[e("a-col",{attrs:{span:6}},["rowIndex"===a.dataIndex?e("a-checkbox",{attrs:{value:a.dataIndex,disabled:""}}):t._e(),"rowIndex"!==a.dataIndex?e("a-checkbox",{attrs:{value:a.dataIndex}},[e("j-ellipsis",{attrs:{value:a.title,length:10}})],1):t._e()],1)]]}))],2),e("a-row",{staticStyle:{"padding-top":"10px"}},[e("a-col",[t._v("\n                      恢复默认列配置："),e("a-button",{attrs:{type:"link",size:"small"},on:{click:t.handleRestDefault}},[t._v("恢复默认")])],1)],1)],1)],1),e("a-icon",{attrs:{type:"setting"}})],2)],1)]),e("a-row",{staticStyle:{"margin-top":"8px","text-align":"right"},attrs:{gutter:24}},[e("a-col",{attrs:{md:24,sm:24}},[e("a-pagination",{attrs:{size:"small","show-size-changer":"",showQuickJumper:!0,current:t.ipagination.current,"page-size":t.ipagination.pageSize,"page-size-options":t.ipagination.pageSizeOptions,total:t.ipagination.total,"show-total":function(e,a){return"共 ".concat(e-Math.ceil(e/t.ipagination.pageSize)," 条")}},on:{change:t.paginationChange,showSizeChange:t.paginationShowSizeChange},scopedSlots:t._u([{key:"buildOptionText",fn:function(a){return[e("span",[t._v(t._s(a.value-1)+"条/页")])]}}])})],1)],1)],1),e("account-in-out-list",{ref:"accountInOutList",on:{ok:t.modalFormOk}})],1)],1)],1)},i=[],r=a("df8f"),o=a("b65a"),l=a("d579"),s=a("0fea"),c={name:"AccountReport",mixins:[o["a"]],components:{AccountInOutList:r["default"],JEllipsis:l["default"]},data:function(){return{labelCol:{span:5},wrapperCol:{span:18,offset:1},queryParam:{name:"",serialNo:""},ipagination:{pageSize:11,pageSizeOptions:["11","21","31","101","201"]},allMonthAmount:"",allCurrentAmount:"",tabKey:"1",pageName:"accountReport",defDataIndex:["rowIndex","action","name","serialNo","initialAmount","thisMonthAmount","currentAmount"],defColumns:[{dataIndex:"rowIndex",width:60,align:"center",slots:{title:"customTitle"},customRender:function(t,e,a){return"合计"!==t?parseInt(a)+1:t}},{title:"账户流水",dataIndex:"action",align:"center",width:120,scopedSlots:{customRender:"action"}},{title:"名称",dataIndex:"name",width:150},{title:"编号",dataIndex:"serialNo",width:150},{title:"期初金额",dataIndex:"initialAmount",sorter:function(t,e){return t.initialAmount-e.initialAmount},width:100},{title:"本月发生额",dataIndex:"thisMonthAmount",sorter:function(t,e){return t.thisMonthAmount-e.thisMonthAmount},width:100},{title:"当前余额",dataIndex:"currentAmount",sorter:function(t,e){return t.currentAmount-e.currentAmount},width:100}],url:{list:"/account/listWithBalance",getStatistics:"/account/getStatistics"}}},created:function(){this.getAccountStatistics(),this.initColumnsSetting()},methods:{getQueryParams:function(){var t=Object.assign({},this.queryParam,this.isorter);return t.field=this.getQueryField(),t.currentPage=this.ipagination.current,t.pageSize=this.ipagination.pageSize-1,t},getAccountStatistics:function(){var t=this;Object(s["d"])(this.url.getStatistics,this.queryParam).then((function(e){e&&200===e.code&&e.data&&(t.allMonthAmount=e.data.allMonthAmount,t.allCurrentAmount=e.data.allCurrentAmount)}))},searchQuery:function(){this.loadData(1),this.getAccountStatistics()},showAccountInOutList:function(t){this.$refs.accountInOutList.show(t),this.$refs.accountInOutList.title="查看账户流水-"+t.name,this.$refs.accountInOutList.disableSubmit=!1},exportExcel:function(){for(var t=[],e="名称,编号,期初金额,本月发生额,当前余额",a=0;a<this.dataSource.length;a++){var n=[],i=this.dataSource[a];n.push(i.name,i.serialNo,i.initialAmount,i.thisMonthAmount,i.currentAmount),t.push(n)}var r="账户统计查询";this.handleExportXlsPost("账户统计","账户统计",e,r,t)}}},u=c,d=(a("6d9a"),a("2877")),m=Object(d["a"])(u,n,i,!1,null,"8ab0adb4",null);e["default"]=m.exports},"1ab7":function(t,e,a){},"6d9a":function(t,e,a){"use strict";a("a186")},"950d":function(t,e,a){"use strict";a("1ab7")},a186:function(t,e,a){},d579:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("a-tooltip",{attrs:{placement:"topLeft"}},[e("template",{slot:"title"},[e("span",[t._v(t._s(t.value))])]),t._v("\n  "+t._s(t._f("ellipsis")(t.value,t.length))+"\n")],2)},i=[],r={name:"JEllipsis",props:{value:{type:String,required:!1},length:{type:Number,required:!1,default:25}}},o=r,l=a("2877"),s=Object(l["a"])(o,n,i,!1,null,"4de15389",null);e["default"]=s.exports},df8f:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{ref:"container"},[e("a-modal",{staticStyle:{top:"20px",height:"95%"},attrs:{title:t.title,width:1200,visible:t.visible,getContainer:function(){return t.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:t.wrapClassNameInfo(),mask:t.isDesktop(),maskClosable:!1,cancelText:"关闭"},on:{cancel:t.handleCancel}},[e("template",{slot:"footer"},[e("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")])],1),e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchQuery.apply(null,arguments)}}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:8,sm:24}},[e("a-form-item",{attrs:{label:"单据编号",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-input",{attrs:{placeholder:"请输入单据编号"},model:{value:t.queryParam.number,callback:function(e){t.$set(t.queryParam,"number",e)},expression:"queryParam.number"}})],1)],1),e("a-col",{attrs:{md:8,sm:24}},[e("a-form-item",{attrs:{label:"单据日期",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-range-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",placeholder:["开始时间","结束时间"]},on:{change:t.onDateChange,ok:t.onDateOk},model:{value:t.queryParam.createTimeRange,callback:function(e){t.$set(t.queryParam,"createTimeRange",e)},expression:"queryParam.createTimeRange"}})],1)],1),e("a-col",{attrs:{md:8,sm:24}},[e("a-button",{attrs:{type:"primary"},on:{click:t.searchQuery}},[t._v("查询")]),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.searchReset}},[t._v("重置")]),e("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"download"},on:{click:t.exportExcel}},[t._v("导出")])],1)],1)],1)],1),e("a-table",{ref:"table",attrs:{bordered:"",size:"middle",rowKey:"id",columns:t.columns,dataSource:t.dataSource,components:t.handleDrag(t.columns),pagination:t.ipagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"numberCustomRender",fn:function(a,n){return e("span",{},[e("a",{on:{click:function(e){return t.myHandleDetail(n)}}},[t._v(t._s(n.number))])])}}])},[e("span",{attrs:{slot:"customTitle"},slot:"customTitle"},[e("a-popover",{attrs:{trigger:"click",placement:"right"}},[e("template",{slot:"content"},[e("a-checkbox-group",{attrs:{defaultValue:t.settingDataIndex},on:{change:t.onColChange},model:{value:t.settingDataIndex,callback:function(e){t.settingDataIndex=e},expression:"settingDataIndex"}},[e("a-row",{staticStyle:{width:"600px"}},[t._l(t.defColumns,(function(a,n){return[[e("a-col",{attrs:{span:6}},["rowIndex"===a.dataIndex?e("a-checkbox",{attrs:{value:a.dataIndex,disabled:""}}):t._e(),"rowIndex"!==a.dataIndex?e("a-checkbox",{attrs:{value:a.dataIndex}},[e("j-ellipsis",{attrs:{value:a.title,length:10}})],1):t._e()],1)]]}))],2),e("a-row",{staticStyle:{"padding-top":"10px"}},[e("a-col",[t._v("\n                  恢复默认列配置："),e("a-button",{attrs:{type:"link",size:"small"},on:{click:t.handleRestDefault}},[t._v("恢复默认")])],1)],1)],1)],1),e("a-icon",{attrs:{type:"setting"}})],2)],1)]),e("bill-detail",{ref:"billDetail"}),e("financial-detail",{ref:"financialDetail"})],2)],1)},i=[],r=a("9be9"),o=a("0b17"),l=a("b65a"),s=a("ac0d"),c=a("d579"),u=a("4ec3"),d={name:"AccountInOutList",mixins:[l["a"],s["b"]],components:{BillDetail:r["default"],FinancialDetail:o["default"],JEllipsis:c["default"]},data:function(){return{title:"操作",visible:!1,disableMixinCreated:!0,toFromType:"",currentAccountId:"",currentInitialAmount:"",queryParam:{accountId:"",initialAmount:"",number:"",beginTime:"",endTime:""},tabKey:"1",pageName:"accountInOutList",defDataIndex:["rowIndex","number","type","supplierName","changeAmount","balance","operTime"],defColumns:[{dataIndex:"rowIndex",width:40,align:"center",slots:{title:"customTitle"},customRender:function(t,e,a){return parseInt(a)+1}},{title:"单据编号",dataIndex:"number",width:120,scopedSlots:{customRender:"numberCustomRender"}},{title:"类型",dataIndex:"type",width:100},{title:"单位信息",dataIndex:"supplierName",width:180,ellipsis:!0},{title:"金额",dataIndex:"changeAmount",width:100,ellipsis:!0,customRender:function(t,e,a){if(e.aList&&e.amList){for(var n=e.aList.toString().split(","),i=e.amList.toString().split(","),r=0,o=0;o<n.length;o++)n[o]==e.accountId&&(r=i[o]);return r>0&&(r="+"+r),r+"[多账户]"}return e.changeAmount>0?"+"+e.changeAmount:e.changeAmount}},{title:"余额",dataIndex:"balance",width:80},{title:"单据日期",dataIndex:"operTime",width:120},{title:"备注",dataIndex:"remark",width:150}],labelCol:{xs:{span:1},sm:{span:2}},wrapperCol:{xs:{span:10},sm:{span:16}},url:{list:"/account/findAccountInOutList"}}},created:function(){this.initColumnsSetting()},methods:{getQueryParams:function(){var t=Object.assign({},this.queryParam,this.isorter);return t.field=this.getQueryField(),t.accountId=this.currentAccountId,t.initialAmount=this.currentInitialAmount,t.currentPage=this.ipagination.current,t.pageSize=this.ipagination.pageSize,t},show:function(t){this.model=Object.assign({},t),this.currentAccountId=t.id,this.currentInitialAmount=t.initialAmount,this.visible=!0,this.queryParam.accountId=t.id,this.queryParam.initialAmount=t.initialAmount,this.loadData(1)},close:function(){this.$emit("close"),this.visible=!1},handleCancel:function(){this.close()},onDateChange:function(t,e){this.queryParam.beginTime=e[0],this.queryParam.endTime=e[1]},onDateOk:function(t){},myHandleDetail:function(t){var e=this,a=this;this.toFromType=t.fromType,"bill"===t.fromType?Object(u["W"])({number:t.number}).then((function(n){n&&200===n.code&&(e.$refs.billDetail.isCanBackCheck=!1,a.$refs.billDetail.show(n.data,t.type),a.$refs.billDetail.title="详情")})):"financial"===t.fromType&&Object(u["bb"])({billNo:t.number}).then((function(n){n&&200===n.code&&(e.$refs.financialDetail.isCanBackCheck=!1,a.$refs.financialDetail.show(n.data,t.type),a.$refs.financialDetail.title="详情")}))},exportExcel:function(){for(var t=[],e="单据编号,类型,单位信息,金额,余额,单据日期,备注",a=0;a<this.dataSource.length;a++){var n=[],i=this.dataSource[a];n.push(i.number,i.type,i.supplierName,this.getRealChangeAmount(i),i.balance,i.operTime,i.remark),t.push(n)}var r="账户流水";this.handleExportXlsPost("账户流水","账户流水",e,r,t)},getRealChangeAmount:function(t){if(t.aList&&t.amList){for(var e=t.aList.toString().split(","),a=t.amList.toString().split(","),n=0,i=0;i<e.length;i++)e[i]==t.accountId&&(n=a[i]);return n>0&&(n="+"+n),n+"[多账户]"}return t.changeAmount>0?"+"+t.changeAmount:t.changeAmount}}},m=d,p=(a("950d"),a("2877")),h=Object(p["a"])(m,n,i,!1,null,"33ed2b80",null);e["default"]=h.exports}}]);