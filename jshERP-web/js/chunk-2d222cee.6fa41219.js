(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d222cee"],{cfd9:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{ref:"container"},[t("a-modal",{staticStyle:{top:"20px",height:"95%"},attrs:{title:e.title,width:1250,visible:e.visible,getContainer:function(){return e.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:e.wrapClassNameInfo(),mask:e.isDesktop(),maskClosable:!1},on:{cancel:e.handleCancel}},[t("template",{slot:"footer"},[t("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("取消")])],1),t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"单据编号",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[t("a-input",{attrs:{placeholder:"请输入单据编号查询"},model:{value:e.queryParam.number,callback:function(t){e.$set(e.queryParam,"number",t)},expression:"queryParam.number"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"商品信息",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[t("a-input",{attrs:{placeholder:"条码|名称|规格|型号"},model:{value:e.queryParam.materialParam,callback:function(t){e.$set(e.queryParam,"materialParam",t)},expression:"queryParam.materialParam"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"单据日期",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-range-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",placeholder:["开始时间","结束时间"]},on:{change:e.onDateChange,ok:e.onDateOk},model:{value:e.queryParam.createTimeRange,callback:function(t){e.$set(e.queryParam,"createTimeRange",t)},expression:"queryParam.createTimeRange"}})],1)],1),t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-button",{attrs:{type:"primary"},on:{click:e.searchQuery}},[e._v("查询")]),t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.searchReset}},[e._v("重置")])],1)],1)],1)],1)],1),t("div",{staticClass:"table-operator",staticStyle:{"margin-top":"5px"}},[t("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleBatchInOut}},[e._v("批量"+e._s(e.queryParam.type))]),t("span",{staticStyle:{"padding-left":"10px"}},[e._v("注意：含有序列号、批号商品或部分入库状态不能批量"+e._s(e.queryParam.type)+"，需要到新增界面关联单据")])],1),t("a-table",{ref:"table",attrs:{bordered:"",size:"middle",rowKey:"id",columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"numberCustomRender",fn:function(a,n){return t("span",{},[e.queryParam.purchaseStatus?e._e():t("a",{on:{click:function(t){return e.myHandleDetail(n)}}},[e._v(e._s(n.number))]),e.queryParam.purchaseStatus?t("span",[e._v(e._s(n.number))]):e._e()])}},{key:"customRenderStatus",fn:function(a,n){return[["1"===n.status?t("a-tag",{attrs:{color:"green"}},[e._v("已审核")]):e._e(),"3"===n.status&&"入库"===e.queryParam.type?t("a-tag",{attrs:{color:"blue"}},[e._v("部分入库")]):e._e(),"3"===n.status&&"出库"===e.queryParam.type?t("a-tag",{attrs:{color:"blue"}},[e._v("部分出库")]):e._e()]]}}])}),t("bill-detail",{ref:"billDetail"})],2)],1)},s=[],r=a("9be9"),l=a("b65a"),i=a("ac0d"),o=a("4ec3"),c={name:"BatchWaitBillList",mixins:[l["a"],i["b"]],components:{BillDetail:r["default"]},data:function(){return{title:"操作",visible:!1,disableMixinCreated:!0,selectedRowKeys:[],linkNumber:"",organId:"",remark:"",queryParam:{number:"",materialParam:"",type:"",subType:"",status:""},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},columns:[{title:"",dataIndex:"organName",width:120,ellipsis:!0},{title:"单据编号",dataIndex:"number",width:130,scopedSlots:{customRender:"numberCustomRender"}},{title:"商品信息",dataIndex:"materialsList",width:280,ellipsis:!0,customRender:function(e,t,a){if(e)return e.replace(",","，")}},{title:"单据日期",dataIndex:"operTimeStr",width:145},{title:"操作员",dataIndex:"userName",width:70},{title:"数量",dataIndex:"materialCount",width:60},{title:"状态",dataIndex:"status",width:70,align:"center",scopedSlots:{customRender:"customRenderStatus"}}],dataSource:[],url:{list:"/depotHead/waitBillList"}}},created:function(){},methods:{show:function(e,t,a){this.queryParam.type=e,this.queryParam.subType=t,this.queryParam.status=a,this.columns[0].title="供应商或客户",this.model=Object.assign({},{}),this.visible=!0,this.loadData(1)},myHandleDetail:function(e){var t=this;Object(o["W"])({number:e.number}).then((function(e){if(e&&200===e.code){var a=e.data.depotHeadType;a=a.replace("其它",""),t.$refs.billDetail.show(e.data,a),t.$refs.billDetail.title=a+"-详情"}}))},close:function(){this.$emit("close"),this.visible=!1},handleCancel:function(){this.close()},onSelectChange:function(e){this.selectedRowKeys=e},onDateChange:function(e,t){this.queryParam.beginTime=t[0],this.queryParam.endTime=t[1]},onDateOk:function(e){},searchReset:function(){this.queryParam={type:this.queryParam.type,subType:this.queryParam.subType,status:"1,3"},this.loadData(1)},handleBatchInOut:function(){var e=this;this.selectedRowKeys.length<=0?this.$message.warning("请选择一条记录！"):this.$confirm({title:"确认批量操作",content:"是否批量操作选中的单据?",onOk:function(){for(var t="",a=0;a<e.selectedRowKeys.length;a++)t+=e.selectedRowKeys[a]+",";e.confirmLoading=!0,Object(o["p"])({ids:t}).then((function(t){200===t.code?(e.$emit("ok"),e.selectedRowKeys=[],e.confirmLoading=!1,e.close()):(e.$message.warning(t.data.message),e.confirmLoading=!1)}))}})}}},u=c,m=a("2877"),d=Object(m["a"])(u,n,s,!1,null,"f6b4db3e",null);t["default"]=d.exports}}]);