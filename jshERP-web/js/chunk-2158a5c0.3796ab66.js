(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2158a5c0","chunk-2d21e3e9"],{"08ea":function(t,e,a){},"4d95":function(t,e,a){"use strict";a("08ea")},6249:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:24}},[e("a-card",{style:t.cardStyle,attrs:{bordered:!1}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchQuery.apply(null,arguments)}}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"供应商",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-select",{attrs:{placeholder:"请选择供应商",dropdownMatchSelectWidth:!1,showSearch:"","allow-clear":"",optionFilterProp:"children"},model:{value:t.queryParam.organId,callback:function(e){t.$set(t.queryParam,"organId",e)},expression:"queryParam.organId"}},t._l(t.supList,(function(a,n){return e("a-select-option",{key:n,attrs:{value:a.id}},[t._v("\n                    "+t._s(a.supplier)+"\n                  ")])})),1)],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"账单周期",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-range-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",placeholder:["开始时间","结束时间"]},on:{change:t.onDateChange},model:{value:t.queryParam.createTimeRange,callback:function(e){t.$set(t.queryParam,"createTimeRange",e)},expression:"queryParam.createTimeRange"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("span",{staticClass:"table-page-search-submitButtons"},[e("a-button",{attrs:{type:"primary"},on:{click:t.searchQuery}},[t._v("查询")]),e("a-button",{directives:[{name:"print",rawName:"v-print",value:"#reportPrint",expression:"'#reportPrint'"}],staticStyle:{"margin-left":"8px"},attrs:{icon:"printer"}},[t._v("打印")]),e("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"download"},on:{click:t.exportExcel}},[t._v("导出")]),e("a",{staticStyle:{"margin-left":"8px"},on:{click:t.handleToggleSearch}},[t._v("\n                  "+t._s(t.toggleSearchStatus?"收起":"展开")+"\n                  "),e("a-icon",{attrs:{type:t.toggleSearchStatus?"up":"down"}})],1)],1)]),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",[t._v("\n                "+t._s(t.firstTotal)+" "+t._s(t.lastTotal)+"\n              ")])],1)],1),t.toggleSearchStatus?[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"欠款情况",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-select",{model:{value:t.queryParam.hasDebt,callback:function(e){t.$set(t.queryParam,"hasDebt",e)},expression:"queryParam.hasDebt"}},[e("a-select-option",{attrs:{value:"1"}},[t._v("有欠款")]),e("a-select-option",{attrs:{value:"0"}},[t._v("无欠款")])],1)],1)],1)],1)]:t._e()],2)],1),e("section",{ref:"print",attrs:{id:"reportPrint"}},[e("a-table",{ref:"table",attrs:{bordered:"",size:"middle",rowKey:"id",columns:t.columns,dataSource:t.dataSource,components:t.handleDrag(t.columns),pagination:!1,scroll:t.scroll,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(a,n){return e("span",{},[e("a",{on:{click:function(e){return t.showDebtAccountList(n)}}},[t._v(t._s(n.id?"详情":""))])])}}])},[e("span",{attrs:{slot:"customTitle"},slot:"customTitle"},[e("a-popover",{attrs:{trigger:"click",placement:"right"}},[e("template",{slot:"content"},[e("a-checkbox-group",{attrs:{defaultValue:t.settingDataIndex},on:{change:t.onColChange},model:{value:t.settingDataIndex,callback:function(e){t.settingDataIndex=e},expression:"settingDataIndex"}},[e("a-row",{staticStyle:{width:"600px"}},[t._l(t.defColumns,(function(a,n){return[[e("a-col",{attrs:{span:6}},["rowIndex"===a.dataIndex?e("a-checkbox",{attrs:{value:a.dataIndex,disabled:""}}):t._e(),"rowIndex"!==a.dataIndex?e("a-checkbox",{attrs:{value:a.dataIndex}},["allNeed"!==a.dataIndex?e("j-ellipsis",{attrs:{value:a.title,length:10}}):t._e(),"allNeed"===a.dataIndex?e("j-ellipsis",{attrs:{value:"期末应付",length:10}}):t._e()],1):t._e()],1)]]}))],2),e("a-row",{staticStyle:{"padding-top":"10px"}},[e("a-col",[t._v("\n                      恢复默认列配置："),e("a-button",{attrs:{type:"link",size:"small"},on:{click:t.handleRestDefault}},[t._v("恢复默认")])],1)],1)],1)],1),e("a-icon",{attrs:{type:"setting"}})],2)],1),e("span",{attrs:{slot:"allNeedTitle"},slot:"allNeedTitle"},[t._v("\n            期末应付\n            "),e("a-tooltip",{attrs:{title:"期末应付=期初应付+本期欠款-本期付款"}},[e("a-icon",{attrs:{type:"question-circle"}})],1)],1)]),e("a-row",{staticStyle:{"margin-top":"8px","text-align":"right"},attrs:{gutter:24}},[e("a-col",{attrs:{md:24,sm:24}},[e("a-pagination",{attrs:{size:"small","show-size-changer":"",showQuickJumper:!0,current:t.ipagination.current,"page-size":t.ipagination.pageSize,"page-size-options":t.ipagination.pageSizeOptions,total:t.ipagination.total,"show-total":function(e,a){return"共 ".concat(e-Math.ceil(e/t.ipagination.pageSize)," 条")}},on:{change:t.paginationChange,showSizeChange:t.paginationShowSizeChange},scopedSlots:t._u([{key:"buildOptionText",fn:function(a){return[e("span",[t._v(t._s(a.value-1)+"条/页")])]}}])})],1)],1)],1),e("debt-account-list",{ref:"debtAccountList"})],1)],1)],1)},i=[],r=a("9c95"),o=a("b65a"),l=a("ca00"),s=a("0fea"),c=a("4ec3"),d=a("d579"),u=a("c1df"),p=a.n(u),h={name:"VendorAccount",mixins:[o["a"]],components:{DebtAccountList:r["default"],JEllipsis:d["default"]},data:function(){return{labelCol:{span:5},wrapperCol:{span:18,offset:1},queryParam:{supplierType:"供应商",organId:void 0,hasDebt:"1",beginTime:Object(l["l"])(3),endTime:Object(l["h"])(),createTimeRange:[p()(Object(l["l"])(3)),p()(Object(l["h"])())]},ipagination:{pageSize:11,pageSizeOptions:["11","21","31","101","201"]},supList:[],firstTotal:"",lastTotal:"",tabKey:"1",pageName:"vendorAccount",defDataIndex:["rowIndex","action","supplier","contacts","telephone","phoneNum","email","preNeed","debtMoney","backMoney","allNeed"],defColumns:[{dataIndex:"rowIndex",width:40,align:"center",slots:{title:"customTitle"},customRender:function(t,e,a){return"合计"!==t?parseInt(a)+1:t}},{title:"欠款详情",dataIndex:"action",align:"center",width:80,scopedSlots:{customRender:"action"}},{title:"供应商",dataIndex:"supplier",width:150,ellipsis:!0},{title:"联系人",dataIndex:"contacts",width:100,ellipsis:!0},{title:"手机号码",dataIndex:"telephone",width:100},{title:"联系电话",dataIndex:"phoneNum",width:100},{title:"电子邮箱",dataIndex:"email",width:100},{title:"期初应付",dataIndex:"preNeed",sorter:function(t,e){return t.preNeed-e.preNeed},width:80},{title:"本期欠款",dataIndex:"debtMoney",sorter:function(t,e){return t.debtMoney-e.debtMoney},width:80},{title:"本期付款",dataIndex:"backMoney",sorter:function(t,e){return t.backMoney-e.backMoney},width:80},{dataIndex:"allNeed",sorter:function(t,e){return t.allNeed-e.allNeed},width:80,slots:{title:"allNeedTitle"}}],url:{list:"/depotHead/getStatementAccount"}}},created:function(){this.initSupplier(),this.initColumnsSetting()},methods:{getQueryParams:function(){var t=Object.assign({},this.queryParam,this.isorter);return t.field=this.getQueryField(),t.currentPage=this.ipagination.current,t.pageSize=this.ipagination.pageSize-1,t},initSupplier:function(){var t=this;Object(c["ab"])({}).then((function(e){e&&(t.supList=e)}))},onDateChange:function(t,e){this.queryParam.beginTime=e[0],this.queryParam.endTime=e[1],e[0]&&e[1]&&(this.queryParam.createTimeRange=[p()(e[0]),p()(e[1])])},loadData:function(t){var e=this;1===t&&(this.ipagination.current=1);var a=this.getQueryParams();this.loading=!0,Object(s["d"])(this.url.list,a).then((function(t){200===t.code?(e.dataSource=t.data.rows,e.ipagination.total=t.data.total,e.tableAddTotalRow(e.columns,e.dataSource),e.firstTotal="期初应付："+t.data.firstMoney+"，",e.lastTotal="期末应付："+t.data.lastMoney):510===t.code?e.$message.warning(t.data):e.$message.warning(t.data.message),e.loading=!1}))},searchQuery:function(){""===this.queryParam.beginTime||""===this.queryParam.endTime?this.$message.warning("请选择单据日期！"):this.loadData(1)},exportExcel:function(){for(var t=[],e="供应商,联系人,手机号码,联系电话,电子邮箱,期初应付,本期欠款,本期付款,期末应付",a=0;a<this.dataSource.length;a++){var n=[],i=this.dataSource[a];n.push(i.supplier,i.contacts,i.telephone,i.phoneNum,i.email,i.preNeed,i.debtMoney,i.backMoney,i.allNeed),t.push(n)}var r="单据日期："+this.queryParam.beginTime+"~"+this.queryParam.endTime;this.handleExportXlsPost("供应商对账","供应商对账",e,r,t)},showDebtAccountList:function(t){this.$refs.debtAccountList.show(t.id,"入库","采购","供应商","",this.queryParam.beginTime,this.queryParam.endTime),this.$refs.debtAccountList.title="欠款详情",this.$refs.debtAccountList.disableSubmit=!1}}},m=h,g=(a("4d95"),a("2877")),b=Object(g["a"])(m,n,i,!1,null,"e5212a14",null);e["default"]=b.exports},d579:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("a-tooltip",{attrs:{placement:"topLeft"}},[e("template",{slot:"title"},[e("span",[t._v(t._s(t.value))])]),t._v("\n  "+t._s(t._f("ellipsis")(t.value,t.length))+"\n")],2)},i=[],r={name:"JEllipsis",props:{value:{type:String,required:!1},length:{type:Number,required:!1,default:25}}},o=r,l=a("2877"),s=Object(l["a"])(o,n,i,!1,null,"4de15389",null);e["default"]=s.exports}}]);