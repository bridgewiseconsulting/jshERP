(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ea0eb80","chunk-7ad5c5c0","chunk-34cb347e","chunk-7683a88c","chunk-33c2109a","chunk-5b84ffa5","chunk-2d0b16d0","chunk-2d0bdf09","chunk-2d20ede5"],{"0f9d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("j-select-biz-component",e._g(e._b({attrs:{value:e.value,ellipsisLength:25,listUrl:e.url.list,columns:e.columns}},"j-select-biz-component",e.attrs,!1),e.$listeners))},r=[],i=a("b296"),l={name:"JSelectMultiUser",components:{JSelectBizComponent:i["default"]},props:["value"],data:function(){return{url:{list:"/sys/user/list"},columns:[{title:"姓名",align:"center",width:"25%",widthRight:"70%",dataIndex:"realname"},{title:"账号",align:"center",width:"25%",dataIndex:"username"},{title:"电话",align:"center",width:"20%",dataIndex:"phone"},{title:"出生日期",align:"center",width:"20%",dataIndex:"birthday"}],default:{name:"用户",width:1200,displayKey:"realname",returnKeys:["id","username"],queryParamText:"账号"}}},computed:{attrs:function(){return Object.assign(this.default,this.$attrs)}}},o=l,s=a("2877"),c=Object(s["a"])(o,n,r,!1,null,"050d9629",null);t["default"]=c.exports},2095:function(e,t,a){"use strict";a.r(t);var n,r,i={name:"Ellipsis",props:{prefixCls:{type:String,default:"ant-pro-ellipsis"},tooltip:{type:Boolean,default:!0},length:{type:Number,default:25},lines:{type:Number,default:1},fullWidthRecognition:{type:Boolean,default:!1}},methods:{},render:function(){var e=this.$props;e.tooltip,e.length;this.$slots.default&&this.$slots.default.map((function(e){return e.text})).join("")}},l=i,o=a("2877"),s=Object(o["a"])(l,n,r,!1,null,null,null);t["default"]=s.exports},"2dab":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("a-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.disabled||e.readOnly,placeholder:e.placeholder,value:e.momVal,showTime:e.showTime,format:e.dateFormat,getCalendarContainer:e.getCalendarContainer},on:{change:e.handleDateChange}})},r=[],i=a("c1df"),l=a.n(i),o={name:"JDate",props:{placeholder:{type:String,default:"",required:!1},value:{type:String,required:!1},dateFormat:{type:String,default:"YYYY-MM-DD HH:mm:ss",required:!1},triggerChange:{type:Boolean,required:!1,default:!1},readOnly:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},showTime:{type:Boolean,required:!1,default:!1},getCalendarContainer:{type:Function,default:function(e){return e.parentNode}}},data:function(){var e=this.value;return{decorator:"",momVal:e?l()(e,this.dateFormat):null}},watch:{value:function(e){this.momVal=e?l()(e,this.dateFormat):null}},methods:{moment:l.a,handleDateChange:function(e,t){this.$emit("change",t)}},model:{prop:"value",event:"change"}},s=o,c=a("2877"),u=Object(c["a"])(s,n,r,!1,null,null,null);t["default"]=u.exports},"30b4":function(e,t,a){"use strict";a("6320")},"378b":function(e,t,a){},6320:function(e,t,a){},"8c6e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"j-super-query-box"},[e._t("button",(function(){return[e.superQueryFlag?t("a-tooltip",e._b({attrs:{mouseLeaveDelay:.2}},"a-tooltip",e.tooltipProps,!1),[t("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(e.tooltipProps))]),t("template",{slot:"title"},[t("span",[e._v("已有高级查询条件生效")]),t("a-divider",{attrs:{type:"vertical"}}),t("a",{on:{click:e.handleReset}},[e._v("清空")])],1),t("a-button-group",[t("a-button",{attrs:{type:"primary"},on:{click:e.handleOpen}},[t("a-icon",{attrs:{type:"appstore",theme:"twoTone",spin:""}}),t("span",[e._v("高级查询")])],1),e.izMobile?t("a-button",{attrs:{type:"primary",icon:"delete"},on:{click:e.handleReset}}):e._e()],1)],2):t("a-button",{attrs:{type:"primary",icon:"filter"},on:{click:e.handleOpen}},[e._v("高级查询")])]}),{isActive:e.superQueryFlag,isMobile:e.izMobile,open:e.handleOpen,reset:e.handleReset}),t("j-modal",{staticClass:"j-super-query-modal",staticStyle:{top:"5%","max-height":"95%"},attrs:{title:"高级查询构造器",width:1e3,visible:e.visible,mask:!1,fullscreen:e.izMobile},on:{cancel:e.handleCancel}},[t("template",{slot:"footer"},[t("div",{staticStyle:{float:"left"}},[t("a-button",{attrs:{loading:e.loading},on:{click:e.handleReset}},[e._v("重置")]),t("a-button",{attrs:{loading:e.loading},on:{click:e.handleSave}},[e._v("保存查询条件")])],1),t("a-button",{attrs:{loading:e.loading},on:{click:e.handleCancel}},[e._v("关闭")]),t("a-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleOk}},[e._v("查询")])],1),t("a-spin",{attrs:{spinning:e.loading}},[t("a-row",[t("a-col",{attrs:{sm:24,md:19}},[0===e.queryParamsModel.length?t("a-empty",{staticStyle:{"margin-bottom":"12px"}},[t("div",{attrs:{slot:"description"},slot:"description"},[t("span",[e._v("没有任何查询条件")]),t("a-divider",{attrs:{type:"vertical"}}),t("a",{on:{click:e.handleAdd}},[e._v("点击新增")])],1)]):t("a-form",{attrs:{layout:"inline"}},[t("a-row",{staticStyle:{"margin-bottom":"12px"}},[t("a-col",{attrs:{md:12,xs:24}},[t("a-form-item",{staticStyle:{width:"100%"},attrs:{label:"过滤条件匹配",labelCol:{md:6,xs:24},wrapperCol:{md:18,xs:24}}},[t("a-select",{staticStyle:{width:"100%"},attrs:{getPopupContainer:function(e){return e.parentNode}},model:{value:e.matchType,callback:function(t){e.matchType=t},expression:"matchType"}},[t("a-select-option",{attrs:{value:"and"}},[e._v("AND（所有条件都要求匹配）")]),t("a-select-option",{attrs:{value:"or"}},[e._v("OR（条件中的任意一个匹配）")])],1)],1)],1)],1),e._l(e.queryParamsModel,(function(a,n){return t("a-row",{key:n,staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",gutter:16}},[t("a-col",{staticStyle:{"margin-bottom":"12px"},attrs:{md:8,xs:24}},[t("a-tree-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",treeData:e.fieldTreeData,dropdownStyle:{maxHeight:"400px",overflow:"auto"},placeholder:"选择查询字段",allowClear:"",treeDefaultExpandAll:"",getPopupContainer:function(e){return e.parentNode}},on:{select:function(t,n){return e.handleSelected(n,a)}},model:{value:a.field,callback:function(t){e.$set(a,"field",t)},expression:"item.field"}})],1),t("a-col",{staticStyle:{"margin-bottom":"12px"},attrs:{md:4,xs:24}},[t("a-select",{attrs:{placeholder:"匹配规则",value:a.rule,getPopupContainer:function(e){return e.parentNode}},on:{change:function(t){return e.handleRuleChange(a,t)}}},[t("a-select-option",{attrs:{value:"eq"}},[e._v("等于")]),t("a-select-option",{attrs:{value:"like"}},[e._v("包含")]),t("a-select-option",{attrs:{value:"right_like"}},[e._v("以..开始")]),t("a-select-option",{attrs:{value:"left_like"}},[e._v("以..结尾")]),t("a-select-option",{attrs:{value:"in"}},[e._v("在...中")]),t("a-select-option",{attrs:{value:"ne"}},[e._v("不等于")]),t("a-select-option",{attrs:{value:"gt"}},[e._v("大于")]),t("a-select-option",{attrs:{value:"ge"}},[e._v("大于等于")]),t("a-select-option",{attrs:{value:"lt"}},[e._v("小于")]),t("a-select-option",{attrs:{value:"le"}},[e._v("小于等于")])],1)],1),t("a-col",{staticStyle:{"margin-bottom":"12px"},attrs:{md:8,xs:24}},[a.dictCode?["table-dict"===a.type?[t("j-popup",{attrs:{code:a.dictTable,field:a.dictCode,orgFields:a.dictCode,destFields:a.dictCode},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"item.val"}})]:[t("j-multi-select-tag",{directives:[{name:"show",rawName:"v-show",value:e.allowMultiple(a),expression:"allowMultiple(item)"}],attrs:{dictCode:a.dictCode,placeholder:"请选择"},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"item.val"}}),t("j-dict-select-tag",{directives:[{name:"show",rawName:"v-show",value:!e.allowMultiple(a),expression:"!allowMultiple(item)"}],attrs:{dictCode:a.dictCode,placeholder:"请选择"},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"item.val"}})]]:"popup"===a.type?t("j-popup",e._b({attrs:{value:a.val,"group-id":"superQuery"},on:{input:function(t,n){return e.handleChangeJPopup(a,t,n)}}},"j-popup",a.popup,!1)):"select-user"===a.type||"sel_user"===a.type?t("j-select-multi-user",{attrs:{buttons:!1,multiple:!1,placeholder:"请选择用户",returnKeys:["id",a.customReturnField||"username"]},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"item.val"}}):"select-depart"===a.type||"sel_depart"===a.type?t("j-select-depart",{attrs:{multi:!1,placeholder:"请选择部门",customReturnField:a.customReturnField||"id"},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"item.val"}}):a.options instanceof Array?t("a-select",{attrs:{options:a.options,allowClear:"",placeholder:"请选择",mode:e.allowMultiple(a)?"multiple":""},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"item.val"}}):"area-linkage"===a.type||"pca"===a.type?t("j-area-linkage",{staticStyle:{width:"100%"},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"item.val"}}):"date"==a.type?t("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择日期"},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"item.val"}}):"datetime"==a.type?t("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择时间","show-time":!0,"date-format":"YYYY-MM-DD HH:mm:ss"},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"item.val"}}):"time"===a.type?t("a-time-picker",{staticStyle:{width:"100%"},attrs:{value:a.val?e.moment(a.val,"HH:mm:ss"):null,format:"HH:mm:ss"},on:{change:function(e,t){return a.val=t}}}):"int"==a.type||"number"==a.type?t("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入数值"},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"item.val"}}):t("a-input",{attrs:{placeholder:"请输入值"},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"item.val"}})],2),t("a-col",{staticStyle:{"margin-bottom":"12px"},attrs:{md:4,xs:0}},[t("a-button",{attrs:{icon:"plus"},on:{click:e.handleAdd}}),e._v(" \r\n                "),t("a-button",{attrs:{icon:"minus"},on:{click:function(t){return e.handleDel(n)}}})],1),t("a-col",{staticStyle:{"margin-bottom":"12px","text-align":"right"},attrs:{md:0,xs:24}},[t("a-button",{attrs:{icon:"plus"},on:{click:e.handleAdd}}),e._v(" \r\n                "),t("a-button",{attrs:{icon:"minus"},on:{click:function(t){return e.handleDel(n)}}})],1)],1)}))],2)],1),t("a-col",{attrs:{sm:24,md:5}},[t("a-card",{staticClass:"j-super-query-history-card",attrs:{bordered:!0}},[t("div",{attrs:{slot:"title"},slot:"title"},[e._v("\r\n              保存的查询\r\n            ")]),0===e.saveTreeData.length?t("a-empty",{staticClass:"j-super-query-history-empty",attrs:{description:"没有保存任何查询"}}):t("a-tree",{staticClass:"j-super-query-history-tree",attrs:{showIcon:"",treeData:e.saveTreeData,selectedKeys:[]},on:{select:e.handleTreeSelect}})],1)],1)],1)],1),t("a-modal",{attrs:{title:"请输入保存的名称",visible:e.prompt.visible},on:{cancel:function(t){e.prompt.visible=!1},ok:e.handlePromptOk}},[t("a-input",{model:{value:e.prompt.value,callback:function(t){e.$set(e.prompt,"value",t)},expression:"prompt.value"}})],1)],2)],2)},r=[],i=a("c1df"),l=a.n(i),o=a("ca00"),s=a("ac0d"),c=a("2dab"),u=a("fe54"),d=a("0f9d"),p=a("9e8f");function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function f(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=m(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(o)throw i}}}}function m(e,t){if(e){if("string"==typeof e)return y(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return(t=w(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function w(e){var t=S(e,"string");return"symbol"==h(t)?t:t+""}function S(e,t){if("object"!=h(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var k={name:"JSuperQuery",mixins:[s["b"]],components:{JAreaLinkage:p["default"],JDate:c["default"],JSelectDepart:u["default"],JSelectMultiUser:d["default"]},props:{fieldList:{type:Array,required:!0},callback:{type:String,required:!1,default:"handleSuperQuery"},loading:{type:Boolean,default:!1},saveCode:{type:String,default:null}},data:function(){var e=this.$createElement;return{moment:l.a,fieldTreeData:[],prompt:{visible:!1,value:""},visible:!1,queryParamsModel:[],treeIcon:e("a-icon",{attrs:{type:"file-text"}}),saveTreeData:[],saveCodeBefore:"JSuperQuerySaved_",matchType:"and",superQueryFlag:!1}},computed:{izMobile:function(){return"mobile"===this.device},tooltipProps:function(){return this.izMobile?{visible:!1}:{}},fullSaveCode:function(){var e=this.saveCode;return null!=e&&""!==e||(e=this.$route.fullPath),this.saveCodeBefore+e}},watch:{fullSaveCode:{immediate:!0,handler:function(){var e=this,t=this.$ls.get(this.fullSaveCode);t instanceof Array&&(this.saveTreeData=t.map((function(t){return e.renderSaveTreeData(t)})))}},fieldList:{deep:!0,immediate:!0,handler:function(e){var t=[],a=[];e.forEach((function(e){var n=b({},e);n.label=n.label||n.text;var r=n.children instanceof Array;n.disabled=r,n.selectable=!r,r?(n.children=n.children.map((function(e){var t=b({},e);return t.label=t.label||t.text,t.label=n.label+"-"+t.label,t.value=n.value+","+t.value,t.val="",t})),n.val="",a.push(n)):t.push(n)})),this.fieldTreeData=t.concat(a)}}},methods:{show:function(){this.queryParamsModel&&0!==this.queryParamsModel.length||this.resetLine(),this.visible=!0},handleOk:function(){if(this.isNullArray(this.queryParamsModel))this.$message.warn("不能查询空条件");else{var e={matchType:this.matchType,params:this.removeEmptyObject(this.queryParamsModel)};this.izMobile&&(this.visible=!1),this.emitCallback(e)}},emitCallback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,a=void 0===t?[]:t,n=e.matchType,r=void 0===n?this.matchType:n;this.superQueryFlag=a&&a.length>0;var i,l=f(a);try{for(l.s();!(i=l.n()).done;){var o=i.value;Array.isArray(o.val)&&(o.val=o.val.join(","))}}catch(s){l.e(s)}finally{l.f()}this.$emit(this.callback,a,r)},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},handleAdd:function(){this.addNewLine()},addNewLine:function(){this.queryParamsModel.push({rule:"eq"})},resetLine:function(){this.superQueryFlag=!1,this.queryParamsModel=[],this.addNewLine()},handleDel:function(e){this.queryParamsModel.splice(e,1)},handleSelected:function(e,t){var a=e.dataRef,n=a.type,r=a.options,i=a.dictCode,l=a.dictTable,o=a.customReturnField,s=a.popup;t["type"]=n,t["options"]=r,t["dictCode"]=i,t["dictTable"]=l,t["customReturnField"]=o,s&&(t["popup"]=s),this.$set(t,"val",void 0)},handleOpen:function(){this.show()},handleReset:function(){this.resetLine(),this.emitCallback()},handleSave:function(){var e=this.removeEmptyObject(this.queryParamsModel);this.isNullArray(e)?this.$message.warning("空条件不能保存"):(this.prompt.value="",this.prompt.visible=!0)},handlePromptOk:function(){var e=this,t=this.prompt.value;if(t){var a=this.removeEmptyObject(this.queryParamsModel),n=this.saveTreeData.filter((function(e){return e.originTitle===t}));n.length>0?this.$confirm({content:"".concat(t," 已存在，是否覆盖？"),onOk:function(){e.prompt.visible=!1,n[0].records=a,e.saveToLocalStore(),e.$message.success("保存成功")}}):(this.prompt.visible=!1,this.saveTreeData.push(this.renderSaveTreeData({title:t,matchType:this.matchType,records:a})),this.saveToLocalStore(),this.$message.success("保存成功"))}else this.$message.warning("保存名称不能为空")},handleTreeSelect:function(e,t){if(t.selectedNodes[0]){var a=t.selectedNodes[0].data.props,n=a.matchType,r=a.records;this.matchType=n||this.matchType,this.queryParamsModel=o["c"](r)}},handleRemoveSaveTreeItem:function(e,t){var a=this;e.stopPropagation(),this.$confirm({content:"是否删除当前查询？",onOk:function(){var e=t.eventKey;a.saveTreeData.splice(Number.parseInt(e.substring(2)),1),a.saveToLocalStore()}})},saveToLocalStore:function(){var e=this.saveTreeData.map((function(e){var t=e.originTitle,a=e.matchType,n=e.records;return{title:t,matchType:a,records:n}}));this.$ls.set(this.fullSaveCode,e)},isNullArray:function(e){if(!e||0===e.length)return!0;if(1===e.length){var t=e[0];if(!t.field||null==t.val||""===t.val||!t.rule)return!0}return!1},removeEmptyObject:function(e){for(var t=o["c"](e),a=0;a<t.length;a++){var n=t[a];null==n||Object.keys(n).length<=0?t.splice(a--,1):Array.isArray(n.options)&&n.dictCode&&delete n.options}return t},renderSaveTreeData:function(e){var t=this,a=this.$createElement;return e.icon=this.treeIcon,e.originTitle=e["title"],e.title=function(e,n){var r=n.dataRef.originTitle;return a("div",{class:"j-history-tree-title"},[a("span",[r]),a("div",{class:"j-history-tree-title-closer",on:{click:function(e){return t.handleRemoveSaveTreeItem(e,n)}}},[a("a-icon",{attrs:{type:"close-circle"}})])])},e},allowMultiple:function(e){return"in"===e.rule},handleRuleChange:function(e,t){var a=e.rule;if(this.$set(e,"rule",t),"in"===a&&(e.dictCode||e.options instanceof Array)){var n=e.val;"string"===typeof e.val?n=e.val.split(",")[0]:Array.isArray(e.val)&&(n=e.val[0]),this.$set(e,"val",n)}},handleChangeJPopup:function(e,t,a){e.val=a[e.popup["destFields"]]}}},O=k,x=(a("30b4"),a("2877")),C=Object(x["a"])(O,n,r,!1,null,"5755c32c",null);t["default"]=C.exports},"92fc":function(e,t,a){},a3e5:function(e,t,a){"use strict";a("378b")},b0cd:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"选择部门",width:e.modalWidth,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{tip:"Loading...",spinning:!1}},[t("a-input-search",{staticStyle:{"margin-bottom":"1px"},attrs:{placeholder:"请输入部门名称按回车进行搜索"},on:{search:e.onSearch}}),t("a-tree",{attrs:{checkable:"",treeData:e.treeData,checkStrictly:!0,autoExpandParent:e.autoExpandParent,expandedKeys:e.expandedKeys,checkedKeys:e.checkedKeys},on:{check:e.onCheck,select:e.onSelect,expand:e.onExpand},scopedSlots:e._u([{key:"title",fn:function(a){var n=a.title;return[n.indexOf(e.searchValue)>-1?t("span",[e._v("\n          "+e._s(n.substr(0,n.indexOf(e.searchValue)))+"\n          "),t("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValue))]),e._v("\n          "+e._s(n.substr(n.indexOf(e.searchValue)+e.searchValue.length))+"\n        ")]):t("span",[e._v(e._s(n))])]}}])})],1)],1)},r=[];function i(e){return s(e)||o(e)||u(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e){if(Array.isArray(e))return d(e)}function c(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=u(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(o)throw i}}}}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var p={name:"JSelectDepartModal",props:["modalWidth","multi","rootOpened","departId"],data:function(){return{visible:!1,confirmLoading:!1,treeData:[],autoExpandParent:!0,expandedKeys:[],dataList:[],checkedKeys:[],checkedRows:[],searchValue:""}},created:function(){},watch:{departId:function(){this.initDepartComponent()},visible:{handler:function(){this.departId?this.checkedKeys=this.departId.split(","):this.checkedKeys=[]}}},methods:{show:function(){this.visible=!0,this.checkedRows=[],this.checkedKeys=[]},initDepartComponent:function(){var e="";if(this.departId){var t,a=this.departId,n=c(this.dataList);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.indexOf(r.key)>=0&&(e+=","+r.title)}}catch(i){n.e(i)}finally{n.f()}e&&(e=e.substring(1))}this.$emit("initComp",e)},reWriterWithSlot:function(e){var t,a=c(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.children&&n.children.length>0){this.reWriterWithSlot(n.children);var r=Object.assign({},n);r.children={},this.dataList.push(r)}else this.dataList.push(n),n.scopedSlots={title:"title"}}}catch(i){a.e(i)}finally{a.f()}},initExpandedKeys:function(e){if(e&&e.length>0){var t,a=[],n=c(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.children&&r.children.length>0&&a.push(r.id)}}catch(i){n.e(i)}finally{n.f()}this.expandedKeys=[].concat(a)}else this.expandedKeys=[]},onCheck:function(e,t){var a=this;if(this.multi)this.checkedKeys=e.checked,this.checkedRows=this.getCheckedRows(this.checkedKeys);else{var n=e.checked.filter((function(e){return a.checkedKeys.indexOf(e)<0}));this.checkedKeys=i(n),this.checkedRows=0===this.checkedKeys.length?[]:[t.node.dataRef]}},onSelect:function(e,t){var a=[];if(a.push(e[0]),this.checkedKeys&&0!==this.checkedKeys.length&&this.multi){var n,r=t.node.dataRef.key;if(this.checkedKeys.indexOf(r)>=0)this.checkedKeys=this.checkedKeys.filter((function(e){return e!==r}));else(n=this.checkedKeys).push.apply(n,a)}else this.checkedKeys=[].concat(a),this.checkedRows=[t.node.dataRef];this.checkedRows=this.getCheckedRows(this.checkedKeys)},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},handleSubmit:function(){this.checkedKeys&&0!=this.checkedKeys.length?this.$emit("ok",this.checkedRows,this.checkedKeys.join(",")):this.$emit("ok",""),this.handleClear()},handleCancel:function(){this.handleClear()},handleClear:function(){this.visible=!1,this.checkedKeys=[]},getParentKey:function(e,t){for(var a,n=0;n<t.length;n++){var r=t[n];r.children&&(r.children.some((function(t){return t.key===e}))?a=r.key:this.getParentKey(e,r.children)&&(a=this.getParentKey(e,r.children)))}return a},onSearch:function(e){var t=this,a=this.dataList.map((function(a){return a.title.indexOf(e)>-1?t.getParentKey(a.key,t.treeData):null})).filter((function(e,t,a){return e&&a.indexOf(e)===t}));Object.assign(this,{expandedKeys:a,searchValue:e,autoExpandParent:!0})},getCheckedRows:function(e){var t,a=function(e,t){var n,r=c(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.id===t)return i;if(i.children instanceof Array){var l=a(i.children,t);if(null!=l)return l}}}catch(o){r.e(o)}finally{r.f()}return null},n=[],r=c(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,l=a(this.treeData,i);null!=l&&n.push(l)}}catch(o){r.e(o)}finally{r.f()}return n}}},h=p,f=a("2877"),m=Object(f["a"])(h,n,r,!1,null,"30943766",null);t["default"]=m.exports},b16a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{centered:"",title:e.name+"选择",width:e.width,visible:e.visible,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.close}},[t("a-row",{attrs:{gutter:18}},[t("a-col",{attrs:{span:16}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:14}},[t("a-form-item",{attrs:{label:e.queryParamText||e.name}},[t("a-input",{attrs:{placeholder:"请输入"+(e.queryParamText||e.name)},on:{pressEnter:e.searchQuery},model:{value:e.queryParam[e.queryParamCode||e.valueKey],callback:function(t){e.$set(e.queryParam,e.queryParamCode||e.valueKey,t)},expression:"queryParam[queryParamCode||valueKey]"}})],1)],1),t("a-col",{attrs:{span:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1)],1)],1),t("a-table",{attrs:{size:"small",bordered:"",rowKey:e.rowKey,columns:e.innerColumns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading,scroll:{y:240},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange,type:e.multiple?"checkbox":"radio"},customRow:e.customRowFn},on:{change:e.handleTableChange}})],1),t("a-col",{attrs:{span:8}},[t("a-card",{attrs:{title:"已选"+e.name,bordered:!1,"head-style":{padding:0},"body-style":{padding:0}}},[t("a-table",e._b({attrs:{size:"small",rowKey:e.rowKey,bordered:""},scopedSlots:e._u([{key:"action",fn:function(a,n,r){return t("span",{},[t("a",{on:{click:function(t){return e.handleDeleteSelected(n,r)}}},[e._v("删除")])])}}])},"a-table",e.selectedTable,!1))],1)],1)],1)],1)},r=[],i=a("0fea"),l=a("c4db"),o=a("b65a"),s=a("ca00");function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=d(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(o)throw i}}}}function d(e,t){if(e){if("string"==typeof e)return p(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){m(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function m(e,t,a){return(t=y(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function y(e){var t=v(e,"string");return"symbol"==c(t)?t:t+""}function v(e,t){if("object"!=c(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var b={name:"JSelectBizComponentModal",mixins:[o["a"]],components:{Ellipsis:l["default"]},props:{value:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1},valueKey:{type:String,required:!0},multiple:{type:Boolean,default:!0},width:{type:Number,default:900},name:{type:String,default:""},listUrl:{type:String,required:!0,default:""},valueUrl:{type:String,default:""},displayKey:{type:String,default:null},columns:{type:Array,required:!0,default:function(){return[]}},queryParamCode:{type:String,default:null},queryParamText:{type:String,default:null},rowKey:{type:String,default:"id"},ellipsisLength:{type:Number,default:12}},data:function(){var e=this,t=this.$createElement;return{innerValue:[],selectedTable:{pagination:!1,scroll:{y:240},columns:[f(f({},this.columns[0]),{},{width:this.columns[0].widthRight||this.columns[0].width}),{title:"操作",dataIndex:"action",align:"center",width:60,scopedSlots:{customRender:"action"}}],dataSource:[]},renderEllipsis:function(a){return t("ellipsis",{attrs:{length:e.ellipsisLength}},[a])},url:{list:this.listUrl},ipagination:{current:1,pageSize:5,pageSizeOptions:["5","10","20","30"],showTotal:function(e,t){return t[0]+"-"+t[1]+" 共"+e+"条"},showQuickJumper:!0,showSizeChanger:!0,total:0},options:[],dataSourceMap:{}}},computed:{innerColumns:function(){var e=this,t=Object(s["c"])(this.columns);return t.forEach((function(t){-1!==e.ellipsisLength&&(t.customRender=function(t){return e.renderEllipsis(t)})})),t}},watch:{value:{deep:!0,immediate:!0,handler:function(e){this.innerValue=Object(s["c"])(e),this.selectedRowKeys=[],this.valueWatchHandler(e),this.queryOptionsByValue(e)}},dataSource:{deep:!0,handler:function(e){this.emitOptions(e),this.valueWatchHandler(this.innerValue)}},selectedRowKeys:{immediate:!0,deep:!0,handler:function(e){var t=this;this.selectedTable.dataSource=e.map((function(e){var a,n=u(t.dataSource);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r[t.rowKey]===e)return Object(s["n"])(t.innerValue,r[t.valueKey]),r}}catch(c){n.e(c)}finally{n.f()}var i,l=u(t.selectedTable.dataSource);try{for(l.s();!(i=l.n()).done;){var o=i.value;if(o[t.rowKey]===e)return Object(s["n"])(t.innerValue,o[t.valueKey]),o}}catch(c){l.e(c)}finally{l.f()}return{}}))}}},methods:{close:function(){this.$emit("update:visible",!1)},valueWatchHandler:function(e){var t=this;e.forEach((function(e){t.dataSource.concat(t.selectedTable.dataSource).forEach((function(a){a[t.valueKey]===e&&Object(s["n"])(t.selectedRowKeys,a[t.rowKey])}))}))},queryOptionsByValue:function(e){var t=this;if(e&&0!==e.length){var a,n=!1,r=u(e);try{for(r.s();!(a=r.n()).done;){var l,o=a.value,c=!1,d=u(this.options);try{for(d.s();!(l=d.n()).done;){var p=l.value;if(o===p.value){c=!0;break}}}catch(h){d.e(h)}finally{d.f()}if(!c){n=!0;break}}}catch(h){r.e(h)}finally{r.f()}n&&Object(i["d"])(this.valueUrl||this.listUrl,m(m(m({},this.valueKey,e.join(",")+","),"pageNo",1),"pageSize",e.length)).then((function(e){if(e.success){var a=e.result;a instanceof Array||(a=e.result.records),t.emitOptions(a,(function(e){Object(s["n"])(t.innerValue,e[t.valueKey]),Object(s["n"])(t.selectedRowKeys,e[t.rowKey]),Object(s["n"])(t.selectedTable.dataSource,e,t.rowKey)}))}}))}},emitOptions:function(e,t){var a=this;e.forEach((function(e){var n=e[a.valueKey];a.dataSourceMap[n]=e,Object(s["n"])(a.options,{label:e[a.displayKey||a.valueKey],value:n},"value"),"function"===typeof t&&t(e)})),this.$emit("options",this.options,this.dataSourceMap)},handleOk:function(){var e=this,t=this.selectedTable.dataSource.map((function(t){return t[e.valueKey]}));this.$emit("input",t),this.close()},handleDeleteSelected:function(e,t){this.selectedRowKeys.splice(this.selectedRowKeys.indexOf(e[this.rowKey]),1),this.selectedTable.dataSource.splice(t,1)},customRowFn:function(e){var t=this;return{on:{click:function(){var a=e[t.rowKey];if(t.multiple){var n=t.selectedRowKeys.indexOf(a);-1===n?(t.selectedRowKeys.push(a),t.selectedTable.dataSource.push(e)):t.handleDeleteSelected(e,n)}else t.selectedRowKeys=[a],t.selectedTable.dataSource=[e]}}}}}},g=b,w=a("2877"),S=Object(w["a"])(g,n,r,!1,null,"2c48e243",null);t["default"]=S.exports},b296:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("a-row",{staticClass:"j-select-biz-component-box",attrs:{type:"flex",gutter:8}},[t("a-col",{staticClass:"left",class:{full:!e.buttons}},[e._t("left",(function(){return[t("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:e.placeholder,options:e.selectOptions,allowClear:"",disabled:e.disabled,open:e.selectOpen},on:{dropdownVisibleChange:e.handleDropdownVisibleChange},nativeOn:{click:function(t){e.visible=!e.buttons||e.visible}},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}})]}))],2),e.buttons?t("a-col",{staticClass:"right"},[t("a-button",{attrs:{type:"primary",icon:"search",disabled:e.disabled},on:{click:function(t){e.visible=!0}}},[e._v(e._s(e.selectButtonText))])],1):e._e(),t("j-select-biz-component-modal",e._b({attrs:{visible:e.visible},on:{"update:visible":function(t){e.visible=t},options:e.handleOptions},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},"j-select-biz-component-modal",e.modalProps,!1))],1)},r=[],i=a("b16a"),l={name:"JSelectBizComponent",components:{JSelectBizComponentModal:i["default"]},props:{value:{type:String,default:""},returnId:{type:Boolean,default:!1},placeholder:{type:String,default:"请选择"},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!0},buttons:{type:Boolean,default:!0},displayKey:{type:String,default:null},returnKeys:{type:Array,default:function(){return["id","id"]}},selectButtonText:{type:String,default:"选择"}},data:function(){return{selectValue:[],selectOptions:[],dataSourceMap:{},visible:!1,selectOpen:!1}},computed:{valueKey:function(){return this.returnId?this.returnKeys[0]:this.returnKeys[1]},modalProps:function(){return Object.assign({valueKey:this.valueKey,multiple:this.multiple,returnKeys:this.returnKeys,displayKey:this.displayKey||this.valueKey},this.$attrs)}},watch:{value:{immediate:!0,handler:function(e){this.selectValue=e?e.split(","):[]}},selectValue:{deep:!0,handler:function(e){var t=this,a=e.map((function(e){return t.dataSourceMap[e]}));this.$emit("select",a);var n=e.join(",");this.$emit("input",n),this.$emit("change",n)}}},methods:{handleOptions:function(e,t){this.selectOptions=e,this.dataSourceMap=t},handleDropdownVisibleChange:function(){var e=this;this.selectOpen=!0,this.$nextTick((function(){e.selectOpen=!1}))}}},o=l,s=(a("a3e5"),a("2877")),c=Object(s["a"])(o,n,r,!1,null,"11dfb11e",null);t["default"]=c.exports},c4db:function(e,t,a){"use strict";a.r(t);var n=a("2095");t["default"]=n["default"]},c94f:function(e,t,a){"use strict";a("92fc")},fe54:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"components-input-demo-presuffix"},[t("a-input",{attrs:{placeholder:"请点击选择部门",readOnly:"",disabled:e.disabled},on:{click:e.openModal},model:{value:e.departNames,callback:function(t){e.departNames=t},expression:"departNames"}},[t("a-icon",{attrs:{slot:"prefix",type:"cluster",title:"部门选择控件"},slot:"prefix"}),e.departIds?t("a-icon",{attrs:{slot:"suffix",type:"close-circle",title:"清空"},on:{click:e.handleEmpty},slot:"suffix"}):e._e()],1),t("j-select-depart-modal",{ref:"innerDepartSelectModal",attrs:{"modal-width":e.modalWidth,multi:e.multi,rootOpened:e.rootOpened,"depart-id":e.departIds},on:{ok:e.handleOK,initComp:e.initComp}})],1)},r=[],i=a("b0cd"),l={name:"JSelectDepart",components:{JSelectDepartModal:i["default"]},props:{modalWidth:{type:Number,default:500,required:!1},multi:{type:Boolean,default:!1,required:!1},rootOpened:{type:Boolean,default:!0,required:!1},value:{type:String,required:!1},disabled:{type:Boolean,required:!1,default:!1},customReturnField:{type:String,default:"id"}},data:function(){return{visible:!1,confirmLoading:!1,departNames:"",departIds:""}},mounted:function(){this.departIds=this.value},watch:{value:function(e){"id"===this.customReturnField&&(this.departIds=e)}},methods:{initComp:function(e){this.departNames=e},openModal:function(){this.$refs.innerDepartSelectModal.show()},handleOK:function(e,t){var a=this,n="";!e&&e.length<=0?(this.departNames="",this.departIds=""):(n=e.map((function(e){return e[a.customReturnField]})).join(","),this.departNames=e.map((function(e){return e["departName"]})).join(","),this.departIds=t),this.$emit("change",n)},getDepartNames:function(){return this.departNames},handleEmpty:function(){this.handleOK("")}},model:{prop:"value",event:"change"}},o=l,s=(a("c94f"),a("2877")),c=Object(s["a"])(o,n,r,!1,null,"4d448922",null);t["default"]=c.exports}}]);