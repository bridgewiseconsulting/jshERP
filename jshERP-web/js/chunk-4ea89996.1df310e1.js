(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ea89996","chunk-2d21e3e9"],{a698:function(t,a,e){},ae64:function(t,a,e){"use strict";e("a698")},d579:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t._self._c;return a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v(t._s(t.value))])]),t._v("\n  "+t._s(t._f("ellipsis")(t.value,t.length))+"\n")],2)},i=[],n={name:"JEllipsis",props:{value:{type:String,required:!1},length:{type:Number,required:!1,default:25}}},o=n,l=e("2877"),s=Object(l["a"])(o,r,i,!1,null,"4de15389",null);a["default"]=s.exports},f855:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t._self._c;return a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:24}},[a("a-card",{style:t.cardStyle,attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.searchQuery.apply(null,arguments)}}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"商品信息",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input",{attrs:{placeholder:"请输入条码、名称、助记码、规格、型号等信息"},model:{value:t.queryParam.materialParam,callback:function(a){t.$set(t.queryParam,"materialParam",a)},expression:"queryParam.materialParam"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"单据日期",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",placeholder:["开始时间","结束时间"]},on:{change:t.onDateChange},model:{value:t.queryParam.createTimeRange,callback:function(a){t.$set(t.queryParam,"createTimeRange",a)},expression:"queryParam.createTimeRange"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-button",{attrs:{type:"primary"},on:{click:t.searchQuery}},[t._v("查询")]),a("a-button",{directives:[{name:"print",rawName:"v-print",value:"#reportPrint",expression:"'#reportPrint'"}],staticStyle:{"margin-left":"8px"},attrs:{icon:"printer"}},[t._v("打印")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"download"},on:{click:t.exportExcel}},[t._v("导出")]),a("a",{staticStyle:{"margin-left":"8px"},on:{click:t.handleToggleSearch}},[t._v("\n                  "+t._s(t.toggleSearchStatus?"收起":"展开")+"\n                  "),a("a-icon",{attrs:{type:t.toggleSearchStatus?"up":"down"}})],1)],1)]),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",[a("span",[t._v("入库总数量："+t._s(t.numSumTotalStr)+"，入库总金额："+t._s(t.priceSumTotalStr))])])],1)],1),t.toggleSearchStatus?[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"往来单位",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-select",{attrs:{placeholder:"请选择往来单位",dropdownMatchSelectWidth:!1,showSearch:"","allow-clear":"",optionFilterProp:"children"},model:{value:t.queryParam.organId,callback:function(a){t.$set(t.queryParam,"organId",a)},expression:"queryParam.organId"}},t._l(t.organList,(function(e,r){return a("a-select-option",{key:r,attrs:{value:e.id}},[t._v("\n                      "+t._s(e.supplier)+"\n                    ")])})),1)],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"仓库",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-select",{staticStyle:{width:"100%"},attrs:{optionFilterProp:"children",showSearch:"","allow-clear":"",placeholder:"请选择仓库"},model:{value:t.queryParam.depotId,callback:function(a){t.$set(t.queryParam,"depotId",a)},expression:"queryParam.depotId"}},t._l(t.depotList,(function(e,r){return a("a-select-option",{key:r,attrs:{value:e.id}},[t._v("\n                      "+t._s(e.depotName)+"\n                    ")])})),1)],1)],1),t.orgaTree.length?a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"机构",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"allow-clear":"",treeData:t.orgaTree,placeholder:"请选择机构"},model:{value:t.queryParam.organizationId,callback:function(a){t.$set(t.queryParam,"organizationId",a)},expression:"queryParam.organizationId"}})],1)],1):t._e(),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"商品类别",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{dropdownStyle:{maxHeight:"200px",overflow:"auto"},"allow-clear":"",treeData:t.categoryTree,placeholder:"请选择商品类别"},model:{value:t.queryParam.categoryId,callback:function(a){t.$set(t.queryParam,"categoryId",a)},expression:"queryParam.categoryId"}})],1)],1)],1)]:t._e()],2)],1),a("section",{ref:"print",attrs:{id:"reportPrint"}},[a("a-table",{ref:"table",attrs:{bordered:"",size:"middle",rowKey:"id",columns:t.columns,dataSource:t.dataSource,components:t.handleDrag(t.columns),pagination:!1,scroll:t.scroll,loading:t.loading},on:{change:t.handleTableChange}},[a("span",{attrs:{slot:"customTitle"},slot:"customTitle"},[a("a-popover",{attrs:{trigger:"click",placement:"right"}},[a("template",{slot:"content"},[a("a-checkbox-group",{attrs:{defaultValue:t.settingDataIndex},on:{change:t.onColChange},model:{value:t.settingDataIndex,callback:function(a){t.settingDataIndex=a},expression:"settingDataIndex"}},[a("a-row",{staticStyle:{width:"600px"}},[t._l(t.defColumns,(function(e,r){return[[a("a-col",{attrs:{span:6}},["rowIndex"===e.dataIndex?a("a-checkbox",{attrs:{value:e.dataIndex,disabled:""}}):t._e(),"rowIndex"!==e.dataIndex?a("a-checkbox",{attrs:{value:e.dataIndex}},[a("j-ellipsis",{attrs:{value:e.title,length:10}})],1):t._e()],1)]]}))],2),a("a-row",{staticStyle:{"padding-top":"10px"}},[a("a-col",[t._v("\n                      恢复默认列配置："),a("a-button",{attrs:{type:"link",size:"small"},on:{click:t.handleRestDefault}},[t._v("恢复默认")])],1)],1)],1)],1),a("a-icon",{attrs:{type:"setting"}})],2)],1)]),a("a-row",{staticStyle:{"margin-top":"8px","text-align":"right"},attrs:{gutter:24}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-pagination",{attrs:{size:"small","show-size-changer":"",showQuickJumper:!0,current:t.ipagination.current,"page-size":t.ipagination.pageSize,"page-size-options":t.ipagination.pageSizeOptions,total:t.ipagination.total,"show-total":function(a,e){return"共 ".concat(a-Math.ceil(a/t.ipagination.pageSize)," 条")}},on:{change:t.paginationChange,showSizeChange:t.paginationShowSizeChange},scopedSlots:t._u([{key:"buildOptionText",fn:function(e){return[a("span",[t._v(t._s(e.value-1)+"条/页")])]}}])})],1)],1)],1)])],1)],1)},i=[],n=e("b65a"),o=e("ca00"),l=e("0fea"),s=e("4ec3"),d=e("d579"),c=e("c1df"),u=e.n(c),p={name:"InMaterialCount",mixins:[n["a"]],components:{JEllipsis:d["default"]},data:function(){return{labelCol:{span:5},wrapperCol:{span:18,offset:1},queryParam:{organId:void 0,materialParam:"",depotId:void 0,organizationId:void 0,beginTime:Object(o["l"])(3),endTime:Object(o["h"])(),createTimeRange:[u()(Object(o["l"])(3)),u()(Object(o["h"])())],type:"入库"},ipagination:{pageSize:11,pageSizeOptions:["11","21","31","101","201"]},organList:[],depotList:[],orgaTree:[],categoryTree:[],numSumTotalStr:"0",priceSumTotalStr:"0",tabKey:"1",pageName:"inMaterialCount",defDataIndex:["rowIndex","barCode","mName","standard","model","categoryName","materialUnit","numSum","priceSum"],defColumns:[{dataIndex:"rowIndex",width:40,align:"center",slots:{title:"customTitle"},customRender:function(t,a,e){return"合计"!==t?parseInt(e)+1:t}},{title:"条码",dataIndex:"barCode",sorter:function(t,a){return t.barCode-a.barCode},width:120},{title:"名称",dataIndex:"mName",width:120,ellipsis:!0},{title:"规格",dataIndex:"standard",width:100,ellipsis:!0},{title:"型号",dataIndex:"model",width:100,ellipsis:!0},{title:"颜色",dataIndex:"color",width:60,ellipsis:!0},{title:"品牌",dataIndex:"brand",width:100,ellipsis:!0},{title:"制造商",dataIndex:"mfrs",width:100,ellipsis:!0},{title:"类别",dataIndex:"categoryName",width:120,ellipsis:!0},{title:"单位",dataIndex:"materialUnit",width:120,ellipsis:!0},{title:"入库数量",dataIndex:"numSum",sorter:function(t,a){return t.numSum-a.numSum},width:120},{title:"入库金额",dataIndex:"priceSum",sorter:function(t,a){return t.priceSum-a.priceSum},width:120}],url:{list:"/depotHead/findInOutMaterialCount"}}},created:function(){this.getDepotData(),this.initSupplier(),this.loadAllOrgaData(),this.loadCategoryTreeData(),this.initColumnsSetting()},methods:{moment:u.a,getQueryParams:function(){var t=Object.assign({},this.queryParam,this.isorter);return t.field=this.getQueryField(),t.currentPage=this.ipagination.current,t.pageSize=this.ipagination.pageSize-1,t},onDateChange:function(t,a){this.queryParam.beginTime=a[0],this.queryParam.endTime=a[1],a[0]&&a[1]&&(this.queryParam.createTimeRange=[u()(a[0]),u()(a[1])])},loadData:function(t){var a=this;1===t&&(this.ipagination.current=1);var e=this.getQueryParams();this.loading=!0,Object(l["d"])(this.url.list,e).then((function(t){200===t.code?(a.dataSource=t.data.rows,a.ipagination.total=t.data.total,a.numSumTotalStr=t.data.numSumTotal.toFixed(2),a.priceSumTotalStr=t.data.priceSumTotal.toFixed(2),a.tableAddTotalRow(a.columns,a.dataSource)):510===t.code?a.$message.warning(t.data):a.$message.warning(t.data.message),a.loading=!1}))},initSupplier:function(){var t=this;Object(s["Y"])({}).then((function(a){a&&(t.organList=a)}))},getDepotData:function(){var t=this;Object(l["d"])("/depot/findDepotByCurrentUser").then((function(a){200===a.code?t.depotList=a.data:t.$message.info(a.data)}))},loadAllOrgaData:function(){var t=this,a={};Object(s["fb"])(a).then((function(a){a&&(t.orgaTree=a)}))},loadCategoryTreeData:function(){var t=this,a={id:""};Object(s["yb"])(a).then((function(a){if(a){t.categoryTree=[];for(var e=0;e<a.length;e++){var r=a[e];t.categoryTree.push(r)}}}))},searchQuery:function(){""==this.queryParam.beginTime||""==this.queryParam.endTime?this.$message.warning("请选择单据日期！"):this.loadData(1)},exportExcel:function(){for(var t=[],a="条码,名称,规格,型号,颜色,品牌,制造商,类别,单位,入库数量,入库金额",e=0;e<this.dataSource.length;e++){var r=[],i=this.dataSource[e];r.push(i.barCode,i.mName,i.standard,i.model,i.color,i.brand,i.mfrs,i.categoryName,i.materialUnit,i.numSum,i.priceSum),t.push(r)}var n="单据日期："+this.queryParam.beginTime+"~"+this.queryParam.endTime;this.handleExportXlsPost("入库汇总","入库汇总",a,n,t)}}},m=p,g=(e("ae64"),e("2877")),h=Object(g["a"])(m,r,i,!1,null,"fa861d46",null);a["default"]=h.exports}}]);