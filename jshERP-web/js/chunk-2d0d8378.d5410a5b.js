(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d8378"],{"79aa":function(a,e,t){"use strict";t.r(e);var r=function(){var a=this,e=a._self._c;return e("div",{ref:"container"},[e("a-modal",{staticStyle:{top:"50px",height:"90%"},attrs:{title:a.title,width:1250,visible:a.visible,getContainer:function(){return a.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:a.wrapClassNameInfo(),mask:a.isDesktop(),maskClosable:!1,cancelText:"关闭"},on:{cancel:a.handleCancel}},[e("template",{slot:"footer"},[e("a-button",{on:{click:a.handleCancel}},[a._v("关闭")])],1),e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.searchQuery.apply(null,arguments)}}},[e("a-row",{attrs:{gutter:24}},[a.organLabel?e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{attrs:{label:a.organLabel,labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("a-select",{attrs:{dropdownMatchSelectWidth:!1,showSearch:"",optionFilterProp:"children"},model:{value:a.queryParam.organId,callback:function(e){a.$set(a.queryParam,"organId",e)},expression:"queryParam.organId"}},a._l(a.supplierList,(function(t,r){return e("a-select-option",{key:r,attrs:{value:t.id}},[a._v("\n                  "+a._s(t.supplier)+"\n                ")])})),1)],1)],1):a._e(),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"单号",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("a-input",{attrs:{placeholder:"请输入单据编号"},model:{value:a.queryParam.number,callback:function(e){a.$set(a.queryParam,"number",e)},expression:"queryParam.number"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"商品",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("a-input",{attrs:{placeholder:"条码|名称|规格|型号"},model:{value:a.queryParam.materialParam,callback:function(e){a.$set(a.queryParam,"materialParam",e)},expression:"queryParam.materialParam"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"单据日期",labelCol:a.labelCol,wrapperCol:a.wrapperCol}},[e("a-range-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",placeholder:["开始时间","结束时间"]},on:{change:a.onDateChange,ok:a.onDateOk},model:{value:a.queryParam.createTimeRange,callback:function(e){a.$set(a.queryParam,"createTimeRange",e)},expression:"queryParam.createTimeRange"}})],1)],1),e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-col",{attrs:{md:4,sm:24}},[e("a-button",{attrs:{type:"primary"},on:{click:a.searchQuery}},[a._v("查询")]),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:a.searchReset}},[a._v("重置")])],1)],1)],1)],1)],1),e("a-table",{ref:"table",attrs:{bordered:"",size:"middle",rowKey:"id",columns:a.columns,dataSource:a.dataSource,pagination:a.ipagination,loading:a.loading},on:{change:a.handleTableChange},scopedSlots:a._u([{key:"numberCustomRender",fn:function(t,r){return e("span",{},[e("a",{on:{click:function(e){return a.myHandleDetail(r)}}},[a._v(a._s(r.number))])])}},{key:"customRenderStatus",fn:function(t,r){return["0"===r.status?e("a-tag",{attrs:{color:"red"}},[a._v("未审核")]):a._e(),"1"===r.status?e("a-tag",{attrs:{color:"green"}},[a._v("已审核")]):a._e(),"2"===r.status&&"采购订单"===a.queryParam.subType?e("a-tag",{attrs:{color:"cyan"}},[a._v("完成采购")]):a._e(),"2"===r.status&&"销售订单"===a.queryParam.subType?e("a-tag",{attrs:{color:"cyan"}},[a._v("完成销售")]):a._e(),"3"===r.status&&"采购订单"===a.queryParam.subType?e("a-tag",{attrs:{color:"blue"}},[a._v("部分采购")]):a._e(),"3"===r.status&&"销售订单"===a.queryParam.subType?e("a-tag",{attrs:{color:"blue"}},[a._v("部分销售")]):a._e(),"9"===r.status&&"采购订单"===a.queryParam.subType?e("a-tag",{attrs:{color:"orange"}},[a._v("审核中")]):a._e(),"9"===r.status&&"销售订单"===a.queryParam.subType?e("a-tag",{attrs:{color:"orange"}},[a._v("审核中")]):a._e()]}}])}),e("bill-detail",{ref:"billDetail"})],2)],1)},n=[],s=t("9be9"),l=t("b65a"),i=t("ac0d"),o=t("4ec3"),u={name:"HistoryBillList",mixins:[l["a"],i["b"]],components:{BillDetail:s["default"]},data:function(){return{title:"历史单据",visible:!1,disableMixinCreated:!0,organLabel:"",supplierList:[],queryParam:{organId:"",number:"",materialParam:"",type:"",subType:"",status:""},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},columns:[{title:"#",dataIndex:"",key:"rowIndex",width:40,align:"center",customRender:function(a,e,t){return parseInt(t)+1}},{title:"",dataIndex:"organName",width:120,ellipsis:!0},{title:"单据编号",dataIndex:"number",width:150,scopedSlots:{customRender:"numberCustomRender"}},{title:"商品信息",dataIndex:"materialsList",width:280,ellipsis:!0,customRender:function(a,e,t){if(a)return a.replace(",","，")}},{title:"单据日期",dataIndex:"operTimeStr",width:145},{title:"操作员",dataIndex:"userName",width:70},{title:"数量",dataIndex:"materialCount",width:50},{title:"金额合计",dataIndex:"totalPrice",width:70},{title:"含税合计",dataIndex:"totalTaxLastMoney",width:70,customRender:function(a,e,t){return e.discountLastMoney?(e.discountMoney+e.discountLastMoney).toFixed(2):e.totalPrice}},{title:"状态",dataIndex:"status",width:70,align:"center",scopedSlots:{customRender:"customRenderStatus"}}],dataSource:[],url:{list:"/depotHead/list"}}},created:function(){},methods:{show:function(a,e,t,r){this.queryParam.type=a,this.queryParam.subType=e,this.organLabel=t,this.model=Object.assign({},{}),this.visible=!0,this.initColumns(e,t),this.loadSupplier(t,r),this.loadData(1)},initColumns:function(a,e){for(var t=0;t<this.columns.length;t++)"organName"===this.columns[t].dataIndex&&(this.columns[t].title=e);if("请购单"===a)for(var r=0;r<this.columns.length;r++)"organName"===this.columns[r].dataIndex&&this.columns.splice(r,1),"totalPrice"===this.columns[r].dataIndex&&this.columns.splice(r,1),"totalTaxLastMoney"===this.columns[r].dataIndex&&this.columns.splice(r,1)},loadSupplier:function(a,e){var t=this;"供应商"===a?Object(o["ab"])({}).then((function(a){a&&(t.supplierList=a,e&&(t.queryParam.organId=e,t.loadData(1)))})):"客户"===a&&Object(o["X"])({}).then((function(a){a&&(t.supplierList=a,e&&(t.queryParam.organId=e,t.loadData(1)))}))},close:function(){this.$emit("close"),this.visible=!1},handleCancel:function(){this.close()},onDateChange:function(a,e){this.queryParam.beginTime=e[0],this.queryParam.endTime=e[1]},onDateOk:function(a){},searchReset:function(){this.queryParam={type:this.queryParam.type,subType:this.queryParam.subType,status:""},this.loadData(1)},myHandleDetail:function(a){var e=this;Object(o["W"])({number:a.number}).then((function(a){if(a&&200===a.code){var t=a.data.depotHeadType;t=t.replace("其它",""),e.$refs.billDetail.show(a.data,t),e.$refs.billDetail.title="详情"}}))}}},c=u,d=t("2877"),m=Object(d["a"])(c,r,n,!1,null,"22a48114",null);e["default"]=m.exports}}]);